<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui"
          name="viewport">
    <title>文档列表</title>
    <link href="notes.css" rel="stylesheet">
    <script src="shared.js"></script>
    <script src="custom_dialog.js"></script>
    <script src="custom_toast.js"></script>
    <script src="editor.js"></script>
</head>

<body>
<div class="bar-renderer top-tools">

</div>

<textarea id="textarea"></textarea>
<div class="bar-renderer bottom-tools">

</div>
<script type="module">
    import init, {start} from "./notes.js";

    init().then(() => {
        // start("")
    });
</script>


<custom-toast id="toast"></custom-toast>
<script>


    async function renderTool() {
        const stats = await loadToolStatistics();
        const items = getToolItems();
        sortTools(items, stats);

        const bottomTools = document.querySelector('.bottom-tools')
        insertTools(items, bottomTools, 0, 5);
        const topTools = document.querySelector('.top-tools')
        insertTools(items, topTools, 5, 9);
        insertMenuItem();
        insertTools(items, document.getElementById('middle'), 9, items.length);
        bindStatistics();
    }

    renderTool();

    async function insertMenuItem() {
        const topTools = document.querySelector('.top-tools')
        topTools.insertAdjacentHTML('beforeend', `<div class="bar-item-renderer" id="menu-item" >
        <svg viewBox="0 0 24 24">
            <path d="M3 6h18v2.016h-18v-2.016zM3 12.984v-1.969h18v1.969h-18zM3 18v-2.016h18v2.016h-18z"></path>
        </svg>
        <div class="bar-item-title">
           菜单
        </div>
    </div>`)

        document.body.insertAdjacentHTML(`beforeend`, `
 <div  style="position: fixed;
 left: 0; top: 0; right: 0;bottom: 0;
 padding: 0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
 margin: 0 40px;
 display: flex;
 align-items: center;
 flex-direction: column;
justify-content: center;
 "  id="middle-wrapper">
 <div style="
 box-shadow: 0 0 24px 12px rgb(0 0 0 / 25%);
 padding: 16px;
 background-color: #fff;
 border-radius: 12px;
 font-size: 13px;
 color: #0f0f0f;
 position:relative;
  z-index: 2;
  display: grid;
  grid-template-columns: repeat(4,1fr);
  row-gap: 10px;
 " id="middle"></div>
  <div id="middle-overlay" style="position: fixed;
 left: 0; top: 0; right: 0;bottom: 0;
 background-color:rgba(0,0,0,0.6);
 z-index: 1;
 ">
 </div>
 </div>
        `);
        document.getElementById('middle-overlay')
            .addEventListener('click', evt => {
                document.getElementById('middle-wrapper').style.display = 'none';
            })
    }

</script>
</body>

</html>